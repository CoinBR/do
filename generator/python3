import os
from os.path import isfile, join

from db import DIRS, DISTROS, LANGS
from get_cfg import get_cfg

CFG = get_cfg()




def make_path(directory, filename, extension=None):
    maybe_suffix = '.' + extension if extension else ''
    return directory + '/' + filename + maybe_suffix
    
def make_paths(directory, filenames):
    return map(make_path, filenames)

def list_files(directory):
    return [f for f in os.listdir(directory) if isfile(join(directory, f))]

def split_filename_extension(s):
    return s.split('.')

def join_filename_extension(lst):
    return '{}.{}'.format(lst[0], lst[1]) 


def gen_all():

#    def delete_old_dos():
#        paths = map((lambda filename: DIRS['do'] + '/' + filename), list_files(DIRS['do']))     
#        print(list(paths))

    
    sourcefilenames = list_files(DIRS['templates'])
    splitsourcefilenames = map(split_filename_extension, sourcefilenames)

    map(os.remove, make_paths( (DIRS['do'], sourcefilenames, )))

def main():
    gen_all()

main()
